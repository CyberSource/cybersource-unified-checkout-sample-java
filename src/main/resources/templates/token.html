<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/xhtml"
      xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <link rel="stylesheet" th:href="${bootstrapVersion}"
          integrity="sha384-xOolHFLEh07PJGoPkLv1IbcEPTNtaed2xpHsD9ESMhqIYd0nLMwNLD69Npy4HI+N" crossorigin="anonymous">
    <title>Success</title>
    <script>
      if(window. self === window.top) {}
      else {
        var emptyDiv = document.createElement('div');
        emptyDiv.innerHTML = "";
        document.body.append(emptyDiv);
      }

    </script>
</head>
<body>
<nav class="navbar navbar-expand-md navbar-dark sticky-top bg-dark">
    <a class="navbar-brand" href="/">Unified Checkout</a>
</nav>
<main role="main" class="container">
    <div class="py-4 text-center">
        <h2>Successfully Received Transient Token</h2>
    </div>
    <div class="py-2 text-left">
        <p class="lead">
            Unified Checkout returned a transient token (i.e. secured payment details) which you can use to process payment for the customer's order.
            Below you can view the transient token in JWT and decrypted form and choose to either process payment immediately or invoke payer authentication to perform 3DS.
        </p>
    </div>
    <div class="row">
        <div class="col-sm-6">
            <div class="card">
                <div class="card-body">
                    <h5 class="card-title">Process payment</h5>
                    <p class="card-text">Go directly to the payment processing step using the transient token we retrieved from Unified Checkout.</p>
                    <form th:action="@{/receipt}"
                          method="post">
                        <button class="btn btn-primary" type="submit">Process Payment with Transient Token</button>
                    </form>
                </div>
            </div>
        </div>
        <div class="col-sm-6">
            <div class="card" >
                <div class="card-body">
                    <h5 class="card-title">Perform 3DS</h5>
                    <p class="card-text">Begin the payer authentication (3DS) journey by collecting device information.</p>
                    <form th:action="@{/payer-authentication-setup}"
                          method="post">
                        <button class="btn btn-primary" type="submit">Use Transient Token to Perform 3DS</button>
                    </form>
                </div>
            </div>
        </div>
    </div>
    <p/>
    <form>
        <div class="form-group">
            <label for="ta1">JWT-encoded Transient Token:</label>
            <textarea class="form-control" id="ta1" rows="10" th:text="${encodedTransientToken}"></textarea>
            <br/>
            <label for="ta2">Decoded Transient Token:</label>
            <textarea class="form-control" id="ta2" rows="20" th:text="${decodedTransientToken}"></textarea>
        </div>
    </form>
</main>
</body>
</html>